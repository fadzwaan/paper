```bash
┌──(lancer㉿eyun)-[~/Downloads]
└─$ sudo dpkg-divert --add  --rename /usr/bin/discord                                   
Adding 'local diversion of /usr/bin/discord to /usr/bin/discord.distrib'
```

* This created a local diversion of /usr/bin/discord and renamed the original file to /usr/bin/discord.distrib
*--add: You added a diversion for the file /usr/bin/discord, which means future package updates that might modify or replace this file will no longer affect it.
* --rename: The original /usr/bin/discord file was renamed to /usr/bin/discord.distrib. This allows you to place your own modified version of /usr/bin/discord without it being overwritten by package updates
* The original /usr/bin/discord file has been renamed to /usr/bin/discord.distrib
* You can place your own version of the discord binary at /usr/bin/discord if needed, and this version will be used instead of the package-provided one

```bash
┌──(lancer㉿eyun)-[~/Downloads]
└─$ sudo dpkg-divert --remove /usr/bin/discord                                                                      
dpkg-divert: warning: please specify --no-rename explicitly, the default will change to --rename in 1.20.x
Removing 'local diversion of /usr/bin/discord to /usr/bin/discord.distrib'
```
* To revert this change, you can remove the diversion with

```bash
└─$ dpkg-query -l discord
Desired=Unknown/Install/Remove/Purge/Hold
| Status=Not/Inst/Conf-files/Unpacked/halF-conf/Half-inst/trig-aWait/Trig-pend
|/ Err?=(none)/Reinst-required (Status,Err: uppercase=bad)
||/ Name           Version      Architecture Description
+++-==============-============-============-=================================
ii  discord        0.0.67       amd64        Chat for Communities and Friends

```
* list information about mentioned packages if its installed.

```bash
┌──(lancer㉿eyun)-[~/Downloads]
└─$ dpkg-deb --info discord-0.0.67.deb                                                                              
 new Debian package, version 2.0.
 size 103057532 bytes: control archive=943 bytes.
     542 bytes,    13 lines      control
     861 bytes,    32 lines   *  postinst             #!/bin/sh
 Package: discord
 Version: 0.0.67
 Depends: libc6, libasound2, libatomic1, libnotify4, libnspr4, libnss3, libstdc++6, libxss1, libxtst6
 Recommends: libappindicator1 | libayatana-appindicator1
 Section: net
 Priority: optional
 Homepage: https://discord.com
 Architecture: amd64
 Installed-Size: 254060
 Maintainer: Discord Maintainer Team <native-team@discord.com>
 Description: Chat for Communities and Friends
  Discord is the easiest way to communicate over voice, video, and text. Chat,
  hang out, and stay close with your friends and communities.

```
* extract package information


----
Both apt and dpkg refer to the same package database to manage the software installed on a system. This database is located in the directory:
`/var/lib/dpkg/`

1. /var/lib/dpkg/status
+ This file holds the status of installed packages on the system, including details like the package name, version, architecture, and whether it's installed, removed, or purged.
2. /var/lib/dpkg/available
* This file lists packages that are available to install but are not necessarily installed on the system. It can be generated by apt or dpkg.
3. /var/lib/dpkg/info
* This directory contains metadata files about installed packages, such as:  
*.list: Lists of files installed by each package.
*.md5sums: Checksums for the files installed by packages, used to verify file integrity.
*.postinst, *.prerm, *.postrm: Scripts that are run during package installation, configuration, or removal.


How many total packages are installed on the target system?
dpkg -l | grep -c ^ii

